{"ast":null,"code":"const SYNDICATION_URL = 'https://cdn.syndication.twimg.com';\nexport class TwitterApiError extends Error {\n  constructor(_ref) {\n    let {\n      message,\n      status,\n      data\n    } = _ref;\n    super(message);\n    this.name = 'TwitterApiError';\n    this.status = status;\n    this.data = data;\n  }\n}\nconst TWEET_ID = /^[0-9]+$/;\nfunction getToken(id) {\n  return (Number(id) / 1e15 * Math.PI).toString(6 ** 2).replace(/(0+|\\.)/g, '');\n}\n/**\n * Fetches a tweet from the Twitter syndication API.\n */\nexport async function fetchTweet(id, fetchOptions) {\n  var _res_headers_get;\n  if (id.length > 40 || !TWEET_ID.test(id)) {\n    throw new Error(`Invalid tweet id: ${id}`);\n  }\n  const url = new URL(`${SYNDICATION_URL}/tweet-result`);\n  url.searchParams.set('id', id);\n  url.searchParams.set('lang', 'en');\n  url.searchParams.set('features', ['tfw_timeline_list:', 'tfw_follower_count_sunset:true', 'tfw_tweet_edit_backend:on', 'tfw_refsrc_session:on', 'tfw_fosnr_soft_interventions_enabled:on', 'tfw_show_birdwatch_pivots_enabled:on', 'tfw_show_business_verified_badge:on', 'tfw_duplicate_scribes_to_settings:on', 'tfw_use_profile_image_shape_enabled:on', 'tfw_show_blue_verified_badge:on', 'tfw_legacy_timeline_sunset:true', 'tfw_show_gov_verified_badge:on', 'tfw_show_business_affiliate_badge:on', 'tfw_tweet_edit_frontend:on'].join(';'));\n  url.searchParams.set('token', getToken(id));\n  const res = await fetch(url.toString(), fetchOptions);\n  const isJson = (_res_headers_get = res.headers.get('content-type')) == null ? void 0 : _res_headers_get.includes('application/json');\n  const data = isJson ? await res.json() : undefined;\n  if (res.ok) {\n    if ((data == null ? void 0 : data.__typename) === 'TweetTombstone') {\n      return {\n        tombstone: true\n      };\n    }\n    return {\n      data\n    };\n  }\n  if (res.status === 404) {\n    return {\n      notFound: true\n    };\n  }\n  throw new TwitterApiError({\n    message: typeof data.error === 'string' ? data.error : `Failed to fetch tweet at \"${url}\" with \"${res.status}\".`,\n    status: res.status,\n    data\n  });\n}","map":{"version":3,"names":["SYNDICATION_URL","TwitterApiError","Error","constructor","_ref","message","status","data","name","TWEET_ID","getToken","id","Number","Math","PI","toString","replace","fetchTweet","fetchOptions","_res_headers_get","length","test","url","URL","searchParams","set","join","res","fetch","isJson","headers","get","includes","json","undefined","ok","__typename","tombstone","notFound","error"],"sources":["/Users/fernandoferrarazzo/Documents/nifer/ramaportfolio/portfolio/node_modules/react-tweet/dist/api/fetch-tweet.js"],"sourcesContent":["const SYNDICATION_URL = 'https://cdn.syndication.twimg.com';\nexport class TwitterApiError extends Error {\n    constructor({ message, status, data }){\n        super(message);\n        this.name = 'TwitterApiError';\n        this.status = status;\n        this.data = data;\n    }\n}\nconst TWEET_ID = /^[0-9]+$/;\nfunction getToken(id) {\n    return (Number(id) / 1e15 * Math.PI).toString(6 ** 2).replace(/(0+|\\.)/g, '');\n}\n/**\n * Fetches a tweet from the Twitter syndication API.\n */ export async function fetchTweet(id, fetchOptions) {\n    var _res_headers_get;\n    if (id.length > 40 || !TWEET_ID.test(id)) {\n        throw new Error(`Invalid tweet id: ${id}`);\n    }\n    const url = new URL(`${SYNDICATION_URL}/tweet-result`);\n    url.searchParams.set('id', id);\n    url.searchParams.set('lang', 'en');\n    url.searchParams.set('features', [\n        'tfw_timeline_list:',\n        'tfw_follower_count_sunset:true',\n        'tfw_tweet_edit_backend:on',\n        'tfw_refsrc_session:on',\n        'tfw_fosnr_soft_interventions_enabled:on',\n        'tfw_show_birdwatch_pivots_enabled:on',\n        'tfw_show_business_verified_badge:on',\n        'tfw_duplicate_scribes_to_settings:on',\n        'tfw_use_profile_image_shape_enabled:on',\n        'tfw_show_blue_verified_badge:on',\n        'tfw_legacy_timeline_sunset:true',\n        'tfw_show_gov_verified_badge:on',\n        'tfw_show_business_affiliate_badge:on',\n        'tfw_tweet_edit_frontend:on'\n    ].join(';'));\n    url.searchParams.set('token', getToken(id));\n    const res = await fetch(url.toString(), fetchOptions);\n    const isJson = (_res_headers_get = res.headers.get('content-type')) == null ? void 0 : _res_headers_get.includes('application/json');\n    const data = isJson ? await res.json() : undefined;\n    if (res.ok) {\n        if ((data == null ? void 0 : data.__typename) === 'TweetTombstone') {\n            return {\n                tombstone: true\n            };\n        }\n        return {\n            data\n        };\n    }\n    if (res.status === 404) {\n        return {\n            notFound: true\n        };\n    }\n    throw new TwitterApiError({\n        message: typeof data.error === 'string' ? data.error : `Failed to fetch tweet at \"${url}\" with \"${res.status}\".`,\n        status: res.status,\n        data\n    });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}